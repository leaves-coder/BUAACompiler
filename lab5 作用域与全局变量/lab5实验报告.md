# lab5实验报告

> 19231235 赵晰莹

[TOC]

## 修改或新增part

整体增加全局变量layer，作为语义分析部分的层数；

### 变量

> variableQuantity.py

在变量数组类之外再加一类，作为变量层；每进入一次作为基本块的大括号，变量的层数都会+1，例如全局变量为0；

同时，对变量定义与使用的函数也做了进一步封装，定义语句思路如下，使用语句即相反从类钟提取数据，思路基本相同；

| 函数名             | 作用               | 执行思路                                                     |
| ------------------ | ------------------ | ------------------------------------------------------------ |
| assign             | 赋值调用语句       | 如果当前层能够找到定义，则直接赋值，如果找不到，调用前层赋值语句； |
| assignForLastLayer | 赋值语句，遍寻前层 | 递归寻找已定义的量，如果有，则对其赋值，如果找不到，则报错； |

### 语义分析

> process.py

- 变量分层存入`layerProcess()`

  也即上面所说，遇到基本块的大括号变量层数+1，如此存入变量层类；

- 对于其它函数有少量为合理而行的修改；

## 小结

lab5思路较为简单，只是之前没能留好位置导致对所有函数基本都有细小的修改，耗费时间较长，但提交正确率很高。
