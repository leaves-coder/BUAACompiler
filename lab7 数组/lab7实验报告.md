# lab7实验报告

> 19231235 赵晰莹

实现数组需要实现如下四个方面：

- 定义数组

  在变量类中存储数组，新增`arrayLengthA`和`arrayLengthB`用以保存数组的长度（一维与二维），`arrayNumConst`用以保存常量数组的值；

- 初始化

  > 数组的定义和初始化一般是连在一起的，这里分开的说明是为了从类的定义和函数应用两部分分开说明；

  数组的定义与初始化相比普通变量较为特殊，所以选择新增函数`sentenceProcessC()`进行处理；

  初始化时，首先拆分等号左右，对于等号左再对类型，数组名，长度进行拆分，并进行存储；需要注意的是，长度需要即时求值，所以对常量表达式进行简要修改分化出了一个新的能即时求值的常量表达式`constantExpressionForConst.py`；

  将数组的首地址而非定义地址保存在类中（如果保存后者，则需要频繁且没有意义的多次初始化）；

  对于等号右，分维度存储进数组中；如果是常量数组，则先定义一个与之相同大小的数组，将数字放进去，然后将该数组存储进类对应属性中；

  需要注意的是，因为是顺序读入变量，应首先初始化变量名和类型，得到ID，之后再将长度和寄存器存入类中；

- 赋值

  和初始化比较类似，但是赋值的对象是数组中一个位置，和下面调用的区别也不过是一个向里放一个向外拿，区别不大；

  一维数组不需要知道数组长度，二维数组需要知道一维长度，计算式为`a*len+b`，同样需要用到上述新增的能即时求值的常量表达式；

  `int`数组和`const`数组的赋值总体与变量赋值非常类似，在将其封装至`assign`函数中后，只需对返回的`ID`予以处理；

- 调用

  和如上赋值类似，赋值本身是拿出来地址，往里面装的过程，而调用时拿出来地址，往外面拿的过程，相比之下仅仅多了调用存储的值。
