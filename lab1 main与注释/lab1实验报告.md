# lab1实验报告

> 19231235 赵晰莹

## part分解

### 词法分析

基本同词法分析实验，多了一个简单的进制转换判断。`octalToDecimal()`和`hexadecimalToDecimal()`分别为八进制和十六进制转换成十进制的函数，公式可抽象为：十进制数+=进制当前位数字*（进制数^位数），十六进制还需要考虑字母转数字的问题；

### 语法分析

在词法分析实验基础上（`getSym()`）增加语法分析内容，放在了`main()`函数内，由于本次实验内容较少，没有建立比较有拓展性的实验架构，采用了一种简单的分析形式（后来在lab2中发现没法避开这个问题，重新写的语法分析部分）；

根据观察得到本次实验生成公式一定为：int+main+(+)+{+return+数字+;+}，除了数字和注释其它都不变，所以就写一个数组挨个匹配就可以了，输出也同理；

## 踩坑分析

一共搞了一个下午+一个晚上就在修改bug，测试了24遍最后发现换行符还有一个'\r'（......），在词法分析里面加上'\r'就通过了；

## 思考题

#### 你的编译器是怎样消除代码中的注释的？请简要说明。

直接在词法分析部分消除注释，即遇到注释就跳过到注释结束位置；

比如读入一个'\\'，判断其后的是'\\'还是'*'，如果不是就报错，如果是，'\\\\'等待匹配回车，'\\\*'等待匹配'\*\\'；

匹配成功后，恢复正常读入过程。
